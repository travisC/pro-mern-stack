{"version":3,"sources":["webpack:///./src/IssueReport.jsx?c906"],"names":["statuses","StatRow","props","owner","map","status","index","counts","propTypes","PropTypes","string","isRequired","object","IssueReport","Component","dataFetcher","urlBase","location","search","fetch","then","response","ok","json","error","Promise","reject","data","constructor","context","stats","initialState","state","setFilter","bind","componentDidMount","loadData","componentDidUpdate","prevProps","oldQuery","query","newQuery","effort_gte","effort_lte","router","push","pathname","setState","catch","err","showError","render","Object","keys","func","contextTypes","IssueReportWithToast"],"mappings":"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","file":"0.02428dfd467b5ed81a3f.hot-update.js","sourcesContent":["import React from 'react';\nimport { Panel, Table } from 'react-bootstrap';\n\nimport IssueFilter from './IssueFilter.jsx';\nimport withToast from './withToast.jsx';\n\nconst statuses = ['New', 'Open', 'Assigned', 'Fixed', 'Verified', 'Closed'];\n\nconst StatRow = (props) => (\n  <tr>\n    <td>{props.owner}</td>\n    {statuses.map((status, index) => (<td key={index}>{props.counts[status]}</td>))}\n  </tr>\n);\n\nStatRow.propTypes = {\n  owner: React.PropTypes.string.isRequired,\n  counts: React.PropTypes.object.isRequired,\n};\n\nclass IssueReport extends React.Component {\n  static dataFetcher({ urlBase, location }) {\n    const search = location.search ? `${location.search}&_summary` : '?_summary';\n    return fetch(`${urlBase || ''}/api/issues${search}`).then(response => {\n      if (!response.ok) return response.json().then(error => Promise.reject(error));\n      return response.json().then(data => ({ IssueReport: data }));\n    });\n  }\n\n  constructor(props, context) {\n    super(props, context);\n    const stats = context.initialState.IssueReport ? context.initialState.IssueReport : {};\n    this.state = {\n      stats,\n    };\n    this.setFilter = this.setFilter.bind(this);\n  }\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  componentDidUpdate(prevProps) {\n    const oldQuery = prevProps.location.query;\n    const newQuery = this.props.location.query;\n    if (oldQuery.status === newQuery.status\n        && oldQuery.effort_gte === newQuery.effort_gte\n        && oldQuery.effort_lte === newQuery.effort_lte) {\n      return;\n    }\n    this.loadData();\n  }\n\n  setFilter(query) {\n    this.props.router.push({ pathname: this.props.location.pathname, query });\n  }\n\n  loadData() {\n    IssueReport.dataFetcher({ location: this.props.location })\n    .then(data => {\n      this.setState({ stats: data.IssueReport });\n    }).catch(err => {\n      this.props.showError(`Error in fetching data from server: ${err}`);\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <Panel collapsible header=\"Filter\">\n          <IssueFilter setFilter={this.setFilter} initFilter={this.props.location.query} />\n        </Panel>\n        <Table bordered condensed hover responsive>\n          <thead>\n            <tr>\n              <th></th>\n              {statuses.map((status, index) => <td key={index}>{status}</td>)}\n            </tr>\n          </thead>\n          <tbody>\n            {Object.keys(this.state.stats).map((owner, index) =>\n              <StatRow key={index} owner={owner} counts={this.state.stats[owner]} />\n            )}\n          </tbody>\n        </Table>\n      </div>\n    );\n  }\n}\n\nIssueReport.propTypes = {\n  location: React.PropTypes.object.isRequired,\n  router: React.PropTypes.object,\n  showError: React.PropTypes.func.isRequired,\n};\n\nIssueReport.contextTypes = {\n  initialState: React.PropTypes.object,\n};\n\nconst IssueReportWithToast = withToast(IssueReport);\nIssueReportWithToast.dataFetcher = IssueReport.dataFetcher;\n\nexport default IssueReportWithToast;\n\n\n\n// WEBPACK FOOTER //\n// ./src/IssueReport.jsx"],"sourceRoot":""}